/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const S=require("@progress/kendo-react-common"),K=require("./constants.js"),M="items",x={},G=(e,t)=>!e||Array.isArray(e)&&e.length===0?[t]:e.findIndex(o=>o===t)>-1?e.filter(o=>o!==t):[...e,t],h=(e,t)=>{let n=e;for(;n;){if(n.tagName===t)return n;if(n.tagName==="TABLE")return null;n=n.parentElement}return null},_=e=>{if(!e)return;const t=e.getAttribute(K.TABLE_ROW_INDEX_ATTRIBUTE);return t?parseInt(t,10):void 0},O=e=>{if(!e)return;const t=e.getAttribute(K.TABLE_COL_INDEX_ATTRIBUTE);return t?parseInt(t,10):void 0},U=e=>{const t=e.subItemsField||M,n=S.getter(e.dataItemKey);return S.mapTree(e.data,t,o=>S.extendDataItem(o,t,{[e.selectedField]:e.selectedState[n(o)]}))},k=e=>{const{event:t,dataItemKey:n,selectedState:o}=e,{syntheticEvent:a,nativeEvent:s,dataItems:g,componentId:l,mode:E,cell:f,selectedField:y}=t,{target:T,ctrlKey:C,metaKey:D,altKey:I,shiftKey:R}=s;if(a.isDefaultPrevented()||s.keyCode!==S.Keys.enter)return o;const p=h(T,"TD"),i=h(T,"TR"),r=O(p),m=_(i);let d={};return p&&i&&m!==void 0&&r!==void 0&&(d=L({selectedState:o,dataItemKey:n,event:{ctrlKey:C,metaKey:D,altKey:I,shiftKey:R,dataItems:g,cell:f,mode:E,selectedField:y,componentId:l,startColIndex:r,endColIndex:r,startRowIndex:m,endRowIndex:m,isDrag:!1,syntheticEvent:a,nativeEvent:s,target:t.target,dataItem:null}})),d},L=e=>{const{event:t,dataItemKey:n,selectedState:o}=e,{dataItems:a,startRowIndex:s,endRowIndex:g,startColIndex:l,endColIndex:E,cell:f,isDrag:y,ctrlKey:T,shiftKey:C,metaKey:D,componentId:I,mode:R,dataItem:p}=t,i=S.getter(n);let r={};const m=p!==null;if(R==="single"){const d=a.slice(s,s+1)[0],u=i(d);x[I]={rowIndex:s,colIndex:l},r[u]=f?[l]:!0}else if(y||!C&&!T&&!D&&!m){y||(x[I]={rowIndex:s,colIndex:l});const d=[];for(let c=l;c<=E;c++)d.push(c);a.slice(s,g+1).forEach(c=>{const v=i(c);r[v]=f?[...d]:!0})}else if(T||D||m){x[I]={rowIndex:s,colIndex:l};const u=a.slice(s,g+1)[0],c=i(u);r={...o},r[c]=f&&!m?G(r[c],l):!r[c]}else if(C){const d=x[I]&&x[I].rowIndex||0,u=x[I]&&x[I].colIndex||0,c=Math.min(d,s,g),v=Math.max(d,s,g),N=Math.min(u,l,E),B=Math.max(u,l,E),A=[];for(let w=N;w<=B;w++)A.push(w);a.slice(c,v+1).forEach(w=>{const F=i(w);r[F]=f?[...A]:!0})}return r},X=S.hasRelativeStackingContext(),b=e=>{if(!e||!X)return null;let t=e.parentElement;for(;t;){if(window.getComputedStyle(t).transform!=="none")return t;t=t.parentElement}},q=e=>{if(e&&e.ownerDocument&&e!==e.ownerDocument.body){const t=e.getBoundingClientRect();return{left:t.left-e.scrollLeft,top:t.top-e.scrollTop}}return{left:0,top:0}},j=e=>{const t=e?typeof e.enabled=="boolean"?e.enabled:!0:!1,n=e?!!e.drag:!1,o=e&&e.mode?e.mode:"multiple",a=!!(e&&e.cell);return{enabled:t,drag:n,mode:o,cell:a}};exports.closestTagName=h;exports.getColumnIndex=O;exports.getOffset=q;exports.getRowIndex=_;exports.getSelectedState=L;exports.getSelectedStateFromKeyDown=k;exports.getSelectionOptions=j;exports.relativeContextElement=b;exports.setSelectedState=U;
