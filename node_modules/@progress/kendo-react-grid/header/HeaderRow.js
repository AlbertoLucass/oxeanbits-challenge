/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const q=require("react"),v=require("../interfaces/GridSortSettings.js"),E=require("../drag/ColumnDraggable.js"),M=require("./GridHeaderCell.js"),d=require("@progress/kendo-react-common"),b=require("@progress/kendo-react-data-tools"),y=require("@progress/kendo-react-intl"),m=require("../messages/index.js"),k=require("@progress/kendo-svg-icons"),K=require("../utils/index.js");function N(c){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(c){for(const s in c)if(s!=="default"){const o=Object.getOwnPropertyDescriptor(c,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>c[s]})}}return r.default=c,Object.freeze(r)}const l=N(q),O={true:{asc:"desc",desc:"","":"asc"},false:{asc:"desc",desc:"asc","":"asc"}},G={none:"none",asc:"ascending",desc:"descending"};class R extends l.Component{constructor(r){super(r),this.serviceIndex=0,this.index=-1,this.cellKeyDown=(s,o)=>{if(s.isDefaultPrevented())return;const{keyCode:e,metaKey:i,ctrlKey:n}=s;if(this.props.sortable&&o.sortable&&s.keyCode===d.Keys.enter&&this.cellClick(s,o),i&&e===d.Keys.enter||n&&e===d.Keys.space){const a=this.props.columns.findIndex(h=>h.field===o.field);this.props.columnGroupChange&&this.props.columnGroupChange(a,s)}},this.cells=s=>s.map(o=>{const e=this.props.columns[o],i=this.props.sortable&&e.sortable,n=this.props.sort?this.props.sort.findIndex(t=>t.field===e.field):-1,p=n>=0&&this.props.sort[n].dir||"none",a=e.columnMenu===null?null:e.columnMenu||this.props.columnMenu,h=d.classNames({"k-first":e.kFirst,"k-filterable":!!a,"k-table-th":!0,"k-header":!0,"k-grid-header-sticky":e.locked,"k-sorted":this.props.sort&&this.props.sort.some(t=>t.field===e.field)},e.headerClassName);e.locked===!1&&(e.left=0);const S=e.left!==void 0?this.props.isRtl?{left:e.right,right:e.left}:{left:e.left,right:e.right}:{},D=y.provideLocalizationService(this).toLanguageString(m.sortAriaLabel,m.messages[m.sortAriaLabel]),H=e.isAccessible?{ariaSort:G[p],role:"columnheader",ariaColumnIndex:e.ariaColumnIndex,ariaSelected:!1,ariaDescription:i?D:""}:{role:"presentation"},u=e.declarationIndex>=0?++this.index:--this.serviceIndex,x=e.headerCell?e.headerCell:M.GridHeaderCell,z=l.createElement(x,{key:1,field:e.field,onClick:i&&(t=>this.cellClick(t,e))||void 0,selectionChange:this.props.selectionChange,title:e.title,selectionValue:e.headerSelectionValue,render:this.props.cellRender,children:this.sortIcon(n),columnMenuWrapperProps:{column:{field:e.field,title:e.title,locked:e.locked,filter:e.filter,id:e.id},sortable:i&&this.props.sortable,sort:this.props.sort,onSortChange:this.props.sortChange,filter:this.props.filter,filterable:this.props.filterable&&e.filterable,filterOperators:this.props.filterOperators,onFilterChange:this.props.filterChange,group:this.props.group,groupable:this.props.groupable,onGroupChange:this.props.groupChange,columnMenu:a}}),g={...H,key:u,colSpan:e.colSpan,rowSpan:e.rowSpan,className:h,style:S,columnId:e.id,navigatable:e.navigatable,onKeyDown:t=>this.cellKeyDown(t,e),role:"columnheader"},C=[z,this.props.columnResize&&this.props.columnResize.resizable&&e.resizable&&l.createElement(b.ColumnResizer,{key:2,resize:(t,I,w)=>this.props.columnResize&&this.props.columnResize.dragHandler(t,e,I,w),autofit:t=>this.props.columnResize&&this.props.columnResize.dblClickHandler(t,[e.id])})],f=K.resolveCells(this.props.cells,e.cells);if(f&&f.headerCell){const t=f.headerCell;return l.createElement(t,{key:u,thProps:g,index:o},C)}return l.createElement(b.HeaderThElement,{...g,key:u},C)}),this.cellClick=this.cellClick.bind(this)}cellClick(r,s){if(r.preventDefault(),!this.props.sortChange)return;const{allowUnsort:o,mode:e}=v.normalize(this.props.sortable||!1,s.sortable||!1),i=(this.props.sort||[]).filter(a=>a.field===s.field)[0],n=O[o][i&&i.dir||""],p=e==="single"?[]:(this.props.sort||[]).filter(a=>a.field!==s.field);n!==""&&s.field&&p.push({field:s.field,dir:n}),this.props.sortChange(p,r)}sortIcon(r){return this.props.sort?r>=0&&[l.createElement("span",{key:1,className:"k-sort-icon"},l.createElement(d.IconWrap,{name:"sort-"+this.props.sort[r].dir+"-small",icon:this.props.sort[r].dir==="asc"?k.sortAscSmallIcon:k.sortDescSmallIcon})),this.props.sort.length>1&&l.createElement("span",{key:2,className:"k-sort-icon"},l.createElement("span",{className:"k-sort-order"},r+1))]:null}render(){return this.serviceIndex=0,this.index=-1,this.props.columnsMap.map((r,s)=>this.props.pressHandler&&l.createElement(E.ColumnDraggable,{key:s,pressHandler:this.props.pressHandler,dragHandler:this.props.dragHandler,releaseHandler:this.props.releaseHandler,ariaRowIndex:s+1,dragClue:this.props.dragClue,headerRef:this.props.headerRef,containerRef:this.props.containerRef},this.cells(r))||l.createElement("tr",{key:s,className:"k-table-row",role:"row","aria-rowindex":s+1},this.cells(r)))}}y.registerForLocalization(R);exports.HeaderRow=R;
