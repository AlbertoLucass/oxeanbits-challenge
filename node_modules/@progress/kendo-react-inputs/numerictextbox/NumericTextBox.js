/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const te=require("react"),n=require("prop-types"),G=require("@progress/kendo-react-intl"),o=require("@progress/kendo-react-common"),w=require("@progress/kendo-svg-icons"),ne=require("@progress/kendo-react-labels"),re=require("../package-metadata.js"),m=require("../messages/index.js"),s=require("./utils/index.js"),A=require("@progress/kendo-react-buttons");function ae(c){const V=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(c){for(const e in c)if(e!=="default"){const x=Object.getOwnPropertyDescriptor(c,e);Object.defineProperty(V,e,x.get?x:{enumerable:!0,get:()=>c[e]})}}return V.default=c,Object.freeze(V)}const r=ae(te),le="Please enter a valid value!",H=o.createPropsContext(),P=r.forwardRef((c,V)=>{o.validatePackage(re.packageMetadata);const e=o.usePropsContext(H,c),x=o.useId(),B=e.id||x,u=G.useInternationalization(),S=G.useLocalization(),l=r.useRef(null),O=r.useRef(),[K,y]=r.useState(!1),i=r.useRef(s.getInitialState()),E=r.useRef(!1),D=r.useRef(),k=r.useRef(e.defaultValue),C=s.formatValue(i.current.focused&&!e.disabled?i.current.currentLooseValue:s.getStateOrPropsValue(e.value,k.current),e.format,u);D.current=C;const[$]=o.useCustomComponent(e.prefix),[U]=o.useCustomComponent(e.suffix);r.useEffect(()=>{l.current&&l.current.setCustomValidity&&l.current.setCustomValidity(L().valid?"":e.validationMessage||le)});const T=r.useCallback(()=>{l.current&&l.current.focus()},[]),h=r.useCallback(()=>O.current!==void 0?O.current:s.getStateOrPropsValue(e.value,k.current),[e.value]),z=r.useCallback(()=>e.name,[e.name]),I=r.useCallback(()=>e.required,[e.required]),L=r.useCallback(()=>{const a=e.validationMessage!==void 0,t=h(),p=e.valid!==void 0?e.valid:!i.current.valueIsOutOfRange&&(!I()||t!=null);return{customError:a,valid:p,valueMissing:t==null}},[e.validationMessage,e.valid,h,I]),N=r.useCallback(()=>e.validityStyles,[e.validityStyles]),j=r.useCallback(()=>e,[e]),g=r.useCallback(()=>{const a={element:l.current,focus:T};return Object.defineProperty(a,"name",{get:z}),Object.defineProperty(a,"value",{get:h}),Object.defineProperty(a,"validity",{get:L}),Object.defineProperty(a,"validityStyles",{get:N}),Object.defineProperty(a,"required",{get:I}),Object.defineProperty(a,"props",{get:j}),a},[z,h,L,N,I,T,j]);r.useImperativeHandle(V,g);const f=r.useCallback(()=>({eventValue:s.getStateOrPropsValue(e.value,k.current),prevLooseValue:D.current,currentLooseValue:l.current.value,selectionStart:l.current.selectionStart,selectionEnd:l.current.selectionEnd,decimalSelect:!1,valueIsCorrected:!1,valueIsOutOfRange:!1,isPaste:E.current,focused:i.current.focused}),[e.value]),b=r.useCallback((a,t)=>{if(e.disabled)return;O.current=t.eventValue,k.current=t.eventValue;const p=s.formatValue(s.rangeValue(t.eventValue,e.min,e.max),e.format,u),d=s.rangeValue(u.parseNumber(p,e.format),e.min,e.max);d!==t.eventValue&&(t.valueIsOutOfRange=!0,t.eventValue=d,k.current=d),e.value!==t.eventValue&&o.dispatchEvent(e.onChange,a,g(),{value:t.eventValue}),O.current=void 0,i.current=t,y(q=>!q)},[e.value,e.onChange,e.disabled,y,g]),W=r.useCallback(a=>{const t=f();E.current=!1,b(a,s.sanitizeNumber(t,e.format,u))},[e.format,e.onChange,u,b,f]),Y=r.useCallback(a=>{let t=f();const p=u.parseNumber(String(t.currentLooseValue),e.format);if(t.selectionEnd>t.selectionStart&&t.selectionEnd-t.selectionStart===String(t.currentLooseValue).length){const d=u.numberSymbols(),v=d&&a.key===d.minusSign,q=d&&a.key===d.decimal;E.current=!v&&!q;return}switch(a.keyCode){case 38:s.increaseValue(p,t,e.step,e.min,e.max,e.format,u);break;case 40:s.decreaseValue(p,t,e.step,e.min,e.max,e.format,u);break;case 13:{if(e.rangeOnEnter===!1)return;const d=s.formatValue(s.rangeValue(p,e.min,e.max),e.format,u),v=s.rangeValue(u.parseNumber(d,e.format),e.min,e.max);t.eventValue=v,t.currentLooseValue=s.formatValue(v,e.format,u),t.selectionStart=t.selectionEnd=t.currentLooseValue.length;break}case 110:{const d=l.current,v=u.numberSymbols();d&&(t.currentLooseValue=t.currentLooseValue.slice(0,t.selectionStart)+v.decimal+t.currentLooseValue.slice(t.selectionEnd),t.selectionStart=t.selectionEnd=t.selectionStart+1,t=s.sanitizeNumber(t,e.format,u));break}default:return}a.preventDefault(),b(a,t)},[e.format,e.min,e.max,e.step,e.onChange,e.rangeOnEnter,b,f]),J=r.useCallback(()=>{E.current=!0},[]),R=r.useCallback(a=>{if(e.readOnly||e.disabled)return;const t=f();s.increaseValue(u.parseNumber(String(t.currentLooseValue),e.format),t,e.step,e.min,e.max,e.format,u),b(a,t)},[e.format,e.min,e.max,e.step,e.onChange,e.readOnly,e.disabled,b,f]),M=r.useCallback(a=>{if(e.readOnly||e.disabled)return;const t=f();s.decreaseValue(u.parseNumber(String(t.currentLooseValue),e.format),t,e.step,e.min,e.max,e.format,u),b(a,t)},[e.format,e.min,e.max,e.step,e.onChange,e.readOnly,e.disabled,b,f]),Q=r.useCallback(a=>{const t=o.getActiveElement(document);!document||t!==l.current||!l.current||e.readOnly||e.disabled||(a.nativeEvent.deltaY<0&&R(a),a.nativeEvent.deltaY>0&&M(a))},[R,M,e.disabled,e.readOnly]),X=r.useCallback(a=>{i.current.currentLooseValue=D.current,i.current.focused=!0,o.dispatchEvent(e.onFocus,a,g(),{}),y(t=>!t)},[e.onFocus,y,g]),Z=r.useCallback(a=>{i.current=s.getInitialState(),o.dispatchEvent(e.onBlur,a,g(),{}),y(t=>!t)},[e.onBlur,y,g]),ee=r.useCallback(a=>{if(document&&l.current){const t=o.getActiveElement(document);a.preventDefault(),t!==l.current&&l.current.focus()}},[]);o.useIsomorphicLayoutEffect(()=>{l.current&&l.current.type!=="number"&&i.current.selectionStart!==void 0&&i.current.selectionEnd!==void 0&&(l.current.selectionStart=i.current.selectionStart,l.current.selectionEnd=i.current.selectionEnd,i.current.selectionStart=void 0,i.current.selectionEnd=void 0)},[K]);const F=!N()||L().valid,_=r.createElement("span",{dir:e.dir,style:e.label?e.style:{width:e.width,...e.style},className:o.classNames("k-input","k-numerictextbox",{[`k-input-${o.kendoThemeMaps.sizeMap[e.size]||e.size}`]:e.size,[`k-input-${e.fillMode}`]:e.fillMode,[`k-rounded-${o.kendoThemeMaps.roundedMap[e.rounded]||e.rounded}`]:e.rounded,"k-invalid":!F,"k-required":e.required,"k-disabled":e.disabled},e.className),"aria-disabled":e.disabled?"true":void 0},r.createElement($,null),r.createElement("input",{role:"spinbutton",value:C===null?"":C,tabIndex:o.getTabIndex(e.tabIndex,e.disabled),accessKey:e.accessKey,disabled:e.disabled,title:e.title,"aria-disabled":e.disabled?"true":void 0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy,placeholder:e.placeholder,spellCheck:!1,autoComplete:"off",autoCorrect:"off",type:e.inputType||"tel",className:"k-input-inner",id:B,name:e.name,readOnly:e.readOnly,style:e.inputStyle,onChange:W,onFocus:X,onBlur:Z,onKeyDown:Y,onPaste:J,onWheel:Q,ref:l}),r.createElement(U,null),e.children,e.spinners&&r.createElement("span",{className:"k-input-spinner k-spin-button",onMouseDown:ee},r.createElement(A.Button,{tabIndex:-1,type:"button",icon:"caret-alt-up",svgIcon:w.caretAltUpIcon,rounded:null,className:"k-spinner-increase","aria-label":S.toLanguageString(m.numericIncreaseValue,m.messages[m.numericIncreaseValue]),title:S.toLanguageString(m.numericIncreaseValue,m.messages[m.numericIncreaseValue]),onClick:R}),r.createElement(A.Button,{tabIndex:-1,type:"button",icon:"caret-alt-down",svgIcon:w.caretAltDownIcon,rounded:null,className:"k-spinner-decrease","aria-label":S.toLanguageString(m.numericDecreaseValue,m.messages[m.numericDecreaseValue]),title:S.toLanguageString(m.numericDecreaseValue,m.messages[m.numericDecreaseValue]),onClick:M})));return e.label?r.createElement(ne.FloatingLabel,{label:e.label,editorId:B,editorValue:C===null?"":C,editorValid:F,editorDisabled:e.disabled,editorPlaceholder:e.placeholder,children:_,style:{width:e.width},dir:e.dir}):_});P.propTypes={value:n.number,defaultValue:n.number,step:n.number,format:n.oneOfType([n.string,n.shape({style:n.oneOf(["decimal","currency","percent","scientific","accounting"]),currency:n.string,currencyDisplay:n.oneOf(["symbol","code","name"]),useGrouping:n.bool,minimumIntegerDigits:n.number,minimumFractionDigits:n.number,maximumFractionDigits:n.number})]),width:n.oneOfType([n.string,n.number]),tabIndex:n.number,accessKey:n.string,title:n.string,placeholder:n.string,min:n.number,max:n.number,spinners:n.bool,disabled:n.bool,readOnly:n.bool,dir:n.string,name:n.string,label:n.string,validationMessage:n.string,required:n.bool,id:n.string,rangeOnEnter:n.bool,ariaLabelledBy:n.string,ariaDescribedBy:n.string,ariaLabel:n.string,onChange:n.func,onFocus:n.func,onBlur:n.func,size:n.oneOf([null,"small","medium","large"]),rounded:n.oneOf([null,"small","medium","large","full"]),fillMode:n.oneOf([null,"solid","flat","outline"])};P.displayName="KendoNumericTextBox";P.defaultProps={prefix:c=>null,suffix:c=>null,step:1,spinners:!0,disabled:!1,required:!1,validityStyles:!0,rangeOnEnter:!0,onChange:c=>{},onFocus:c=>{},onBlur:c=>{},size:"medium",rounded:"medium",fillMode:"solid"};exports.NumericTextBox=P;exports.NumericTextBoxPropsContext=H;
